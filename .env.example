# =============================================================================
# ML Observability Platform - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=ml-observability-platform
APP_ENV=development  # development, staging, production
APP_DEBUG=true
APP_PORT=8000
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# -----------------------------------------------------------------------------
# API Settings
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true  # Hot reload for development
API_WORKERS=1  # Number of uvicorn workers

# -----------------------------------------------------------------------------
# Database Settings (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=mlobs
POSTGRES_PASSWORD=mlobs_secret_password
POSTGRES_DB=mlobs
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# Redis Settings
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# -----------------------------------------------------------------------------
# MLflow Settings
# -----------------------------------------------------------------------------
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_BACKEND_STORE_URI=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/mlflow
MLFLOW_ARTIFACT_ROOT=s3://mlflow-artifacts
MLFLOW_S3_ENDPOINT_URL=http://minio:9000

# -----------------------------------------------------------------------------
# MinIO Settings (S3-compatible storage)
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_ENDPOINT=minio:9000
AWS_ACCESS_KEY_ID=${MINIO_ROOT_USER}
AWS_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}

# -----------------------------------------------------------------------------
# Prometheus Settings
# -----------------------------------------------------------------------------
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus
PROMETHEUS_PORT=9090

# -----------------------------------------------------------------------------
# Grafana Settings
# -----------------------------------------------------------------------------
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GF_SECURITY_ADMIN_USER=${GRAFANA_ADMIN_USER}
GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD}
GF_USERS_ALLOW_SIGN_UP=false

# -----------------------------------------------------------------------------
# Jaeger Settings (Tracing)
# -----------------------------------------------------------------------------
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
JAEGER_UI_PORT=16686

# -----------------------------------------------------------------------------
# OpenTelemetry Settings
# -----------------------------------------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_EXPORTER_OTLP_INSECURE=true
OTEL_SERVICE_NAME=ml-observability-platform
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# -----------------------------------------------------------------------------
# Prefect Settings (Orchestration)
# -----------------------------------------------------------------------------
PREFECT_API_URL=http://prefect:4200/api
PREFECT_SERVER_API_HOST=0.0.0.0
PREFECT_SERVER_API_PORT=4200

# -----------------------------------------------------------------------------
# Streamlit Dashboard Settings
# -----------------------------------------------------------------------------
STREAMLIT_PORT=8501
STREAMLIT_SERVER_HEADLESS=true
STREAMLIT_SERVER_ENABLE_CORS=false

# -----------------------------------------------------------------------------
# AlertManager Settings
# -----------------------------------------------------------------------------
ALERTMANAGER_PORT=9093

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_TRACING=true
ENABLE_METRICS=true
ENABLE_DRIFT_DETECTION=true
ENABLE_EXPLAINABILITY=true
ENABLE_ALERTING=true

# -----------------------------------------------------------------------------
# Model Settings
# -----------------------------------------------------------------------------
MODEL_DRIFT_THRESHOLD_PSI=0.2
MODEL_DRIFT_THRESHOLD_CRITICAL=0.3
DATA_QUALITY_THRESHOLD=0.8
PERFORMANCE_DEGRADATION_THRESHOLD=0.1

# -----------------------------------------------------------------------------
# Monitoring Intervals
# -----------------------------------------------------------------------------
DRIFT_CHECK_INTERVAL_MINUTES=60
DATA_QUALITY_CHECK_INTERVAL_MINUTES=1440  # Daily
METRICS_SCRAPE_INTERVAL_SECONDS=15
